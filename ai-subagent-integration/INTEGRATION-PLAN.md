# ü§ñ –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ AI –ø–æ–¥–∞–≥–µ–Ω—Ç–∞ (GPT-4o Mini / Gemini) –≤ Claude Code

> **–¶–µ–ª—å**: –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏ –±–æ–ª–µ–µ —ç–∫–æ–Ω–æ–º–∏—á–Ω—ã–º AI –º–æ–¥–µ–ª—è–º –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ Claude

---

## üìä –ê–Ω–∞–ª–∏–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Claude Code:
- ‚ùå **Subagents** –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ –º–æ–¥–µ–ª–∏ Claude (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –≤–Ω–µ—à–Ω–∏–µ AI)
- ‚ùå **LLM Gateway** —Ç–æ–ª—å–∫–æ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ Claude —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- ‚úÖ **MCP —Å–µ—Ä–≤–µ—Ä—ã** –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ API –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å tools
- ‚úÖ **n8n workflows** –ø–æ–ª–Ω–∞—è —Å–≤–æ–±–æ–¥–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ª—é–±—ã–º–∏ AI

---

## üéØ 3 –ø–æ–¥—Ö–æ–¥–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1Ô∏è‚É£ **MCP —Å–µ—Ä–≤–µ—Ä –∫–∞–∫ AI –º–æ—Å—Ç** (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –°–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ–∫—Å–∏ –¥–ª—è GPT-4o Mini/Gemini

```javascript
// –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã MCP —Å–µ—Ä–≤–µ—Ä–∞
{
  "name": "ai-assistant",
  "tools": [
    "ask_gpt_mini",     // –ü—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
    "analyze_with_gemini", // –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
    "summarize_text",   // –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è
    "translate",        // –ü–µ—Ä–µ–≤–æ–¥
    "code_explain"      // –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–¥–∞
  ]
}
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Claude Code
- ‚úÖ –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã `/mcp__ai-assistant__ask_gpt_mini`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚úÖ –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

**–ú–∏–Ω—É—Å—ã**:
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è Node.js —Å–µ—Ä–≤–µ—Ä–∞
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å

---

### 2Ô∏è‚É£ **n8n Workflow –∫–∞–∫ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä**

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é n8n –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

```yaml
Workflow —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
1. Webhook endpoint (—Ç—Ä–∏–≥–≥–µ—Ä –æ—Ç Claude)
2. Router (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫—É—é AI –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
3. OpenAI/Gemini node (–≤—ã–∑–æ–≤ API)
4. Response formatter
5. Return to Claude
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑ –∫–æ–¥–∞
- ‚úÖ –£–∂–µ –µ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è n8n –≤ Claude Code
- ‚úÖ –õ–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ú–∏–Ω—É—Å—ã**:
- ‚ö†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (network hop)
- ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç n8n —Å–µ—Ä–≤–µ—Ä–∞

---

### 3Ô∏è‚É£ **–õ–æ–∫–∞–ª—å–Ω—ã–π API –ø—Ä–æ–∫—Å–∏**

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å unified API

```bash
# –ò—Å–ø–æ–ª—å–∑—É—è LiteLLM
litellm --model gpt-4o-mini,gemini-pro --port 8000
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

**–ú–∏–Ω—É—Å—ã**:
- ‚ùå –ù–µ—Ç –ø—Ä—è–º–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Claude Code
- ‚ùå –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —á–µ—Ä–µ–∑ Bash/curl

---

## üöÄ –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (MCP –ø–æ–¥—Ö–æ–¥)

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
1. [ ] –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏:
   - OpenAI API key –¥–ª—è GPT-4o Mini
   - Google AI API key –¥–ª—è Gemini
2. [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á–∏ –≤ `~/credentials/.env`:
   ```bash
   OPENAI_API_KEY=sk-...
   GOOGLE_AI_API_KEY=...
   ```

### –§–∞–∑–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–∞
1. [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç:
   ```bash
   mkdir ~/Projects/ai-subagent-mcp
   cd ~/Projects/ai-subagent-mcp
   npm init -y
   npm install @modelcontextprotocol/sdk openai @google/generative-ai
   ```

2. [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
   ```
   ai-subagent-mcp/
   ‚îú‚îÄ‚îÄ src/
   ‚îÇ   ‚îú‚îÄ‚îÄ index.js       # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª MCP —Å–µ—Ä–≤–µ—Ä–∞
   ‚îÇ   ‚îú‚îÄ‚îÄ providers/
   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai.js  # GPT-4o Mini –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gemini.js  # Gemini –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   ‚îÇ   ‚îî‚îÄ‚îÄ tools/
   ‚îÇ       ‚îú‚îÄ‚îÄ simple-task.js
   ‚îÇ       ‚îú‚îÄ‚îÄ code-analysis.js
   ‚îÇ       ‚îî‚îÄ‚îÄ translation.js
   ‚îú‚îÄ‚îÄ package.json
   ‚îî‚îÄ‚îÄ .env
   ```

3. [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ tools:
   - `simple_query`: –ü—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã ‚Üí GPT-4o Mini
   - `analyze_code`: –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ ‚Üí Gemini
   - `translate`: –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ ‚Üí GPT-4o Mini
   - `summarize`: –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è ‚Üí Gemini

### –§–∞–∑–∞ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Claude Code
1. [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ `claude_desktop_config.json`:
   ```json
   {
     "mcpServers": {
       "ai-subagent": {
         "command": "node",
         "args": ["/Users/sergey/Projects/ai-subagent-mcp/src/index.js"],
         "env": {
           "OPENAI_API_KEY": "${OPENAI_API_KEY}",
           "GOOGLE_AI_API_KEY": "${GOOGLE_AI_API_KEY}"
         }
       }
     }
   }
   ```

2. [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Claude Code

### –§–∞–∑–∞ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥:
   - `/mcp__ai-subagent__simple_query`
   - `/mcp__ai-subagent__analyze_code`

2. [ ] –¢–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã:
   - –ü—Ä–æ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å –ø—Ä–æ JavaScript
   - –ê–Ω–∞–ª–∏–∑ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –∫–æ–¥–∞
   - –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞
   - –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞

### –§–∞–∑–∞ 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
1. [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
2. [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏
3. [ ] –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ Claude –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
4. [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

---

## üìã –ó–∞–¥–∞—á–∏ –¥–ª—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∞–≥–µ–Ω—Ç—É

### –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è GPT-4o Mini ($0.15/1M tokens):
- ‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è boilerplate –∫–æ–¥–∞
- ‚úÖ –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JSON/SQL
- ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

### –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è Gemini (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π tier):
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –Ω–∞ –æ—à–∏–±–∫–∏
- ‚úÖ –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –û—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è Claude:
- ‚ö° –°–ª–æ–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚ö° –û—Ç–ª–∞–¥–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- ‚ö° –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞
- ‚ö° –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è
- ‚ö° –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ (Read/Write/Edit)

---

## üí∞ –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (–Ω–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤):
| –ú–æ–¥–µ–ª—å | Input | Output | –°–∫–æ—Ä–æ—Å—Ç—å |
|--------|-------|---------|----------|
| Claude Sonnet | $3 | $15 | –°—Ä–µ–¥–Ω—è—è |
| GPT-4o Mini | $0.15 | $0.6 | –ë—ã—Å—Ç—Ä–æ |
| Gemini Flash | Free* | Free* | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ |

*–î–æ 1M —Ç–æ–∫–µ–Ω–æ–≤ –≤ –¥–µ–Ω—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è:
- üìâ –î–æ **95%** –Ω–∞ –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á–∞—Ö
- ‚ö° –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 2-3 —Ä–∞–∑–∞ –Ω–∞ —Ä—É—Ç–∏–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- üéØ Claude —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö

---

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–ª–∞–Ω (n8n)

–ï—Å–ª–∏ MCP —Å–µ—Ä–≤–µ—Ä —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–µ–Ω, –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ n8n:

1. **–°–æ–∑–¥–∞—Ç—å workflow** —Å HTTP endpoint
2. **–î–æ–±–∞–≤–∏—Ç—å nodes**:
   - IF (—Ä–æ—É—Ç–µ—Ä –ø–æ —Ç–∏–ø—É –∑–∞–¥–∞—á–∏)
   - OpenAI node (GPT-4o Mini)
   - Google AI node (Gemini)
   - Set node (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞)
3. **–í—ã–∑—ã–≤–∞—Ç—å –∏–∑ Claude** —á–µ—Ä–µ–∑ Bash:
   ```bash
   curl -X POST https://n8n.srv1068954.hstgr.cloud/webhook/ai-subagent \
     -H "Content-Type: application/json" \
     -d '{"task": "simple", "query": "..."}'
   ```

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–í—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥**: MCP (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ n8n (–±—ã—Å—Ç—Ä–µ–µ)
2. **–ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏** –¥–ª—è OpenAI –∏ Google
3. **–°–æ–∑–¥–∞—Ç—å MVP** —Å 2-3 –±–∞–∑–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö
5. **–ò–∑–º–µ—Ä–∏—Ç—å —ç–∫–æ–Ω–æ–º–∏—é** —Ç–æ–∫–µ–Ω–æ–≤ –∏ –≤—Ä–µ–º–µ–Ω–∏

---

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é! –ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å?**